<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../database/01-overview.html><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Overview - EPFL Project Technical Docs</title><link rel=stylesheet href=../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#infrastructure-overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../index.html title="EPFL Project Technical Docs" class="md-header__button md-logo" aria-label="EPFL Project Technical Docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EPFL Project Technical Docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Overview </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=cyan aria-hidden=true type=radio name=__palette id=__palette_0> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=cyan aria-hidden=true type=radio name=__palette id=__palette_1> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__source> <a href=https://github.com/epfl-enac/co2-calculator title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../index.html class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../architecture/index.html class=md-tabs__link> Architecture </a> </li> <li class=md-tabs__item> <a href=../architecture-decision-records/index.html class=md-tabs__link> Architecture Decision Records </a> </li> <li class=md-tabs__item> <a href=../frontend/01-overview.html class=md-tabs__link> Frontend </a> </li> <li class=md-tabs__item> <a href=../backend/01-overview.html class=md-tabs__link> Backend </a> </li> <li class=md-tabs__item> <a href=../database/01-overview.html class=md-tabs__link> Database </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=01-overview.html class=md-tabs__link> Infrastructure </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../index.html title="EPFL Project Technical Docs" class="md-nav__button md-logo" aria-label="EPFL Project Technical Docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> EPFL Project Technical Docs </label> <div class=md-nav__source> <a href=https://github.com/epfl-enac/co2-calculator title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../architecture/index.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../architecture/01-purpose-scope.html class=md-nav__link> <span class=md-ellipsis> Purpose & Scope </span> </a> </li> <li class=md-nav__item> <a href=../architecture/02-system-overview.html class=md-nav__link> <span class=md-ellipsis> System Overview </span> </a> </li> <li class=md-nav__item> <a href=../architecture/03-subsystem-map.html class=md-nav__link> <span class=md-ellipsis> Subsystem Map </span> </a> </li> <li class=md-nav__item> <a href=../architecture/04-auth-flow.html class=md-nav__link> <span class=md-ellipsis> Auth Flow </span> </a> </li> <li class=md-nav__item> <a href=../architecture/05-environments.html class=md-nav__link> <span class=md-ellipsis> Environments </span> </a> </li> <li class=md-nav__item> <a href=../architecture/06-cicd-pipeline.html class=md-nav__link> <span class=md-ellipsis> CI/CD Pipeline </span> </a> </li> <li class=md-nav__item> <a href=../architecture/07-global-conventions.html class=md-nav__link> <span class=md-ellipsis> Global Conventions </span> </a> </li> <li class=md-nav__item> <a href=../architecture/08-tech-stack.html class=md-nav__link> <span class=md-ellipsis> Tech Stack </span> </a> </li> <li class=md-nav__item> <a href=../architecture/09-component-breakdown.html class=md-nav__link> <span class=md-ellipsis> Component Breakdown </span> </a> </li> <li class=md-nav__item> <a href=../architecture/10-data-flow.html class=md-nav__link> <span class=md-ellipsis> Data Flow </span> </a> </li> <li class=md-nav__item> <a href=../architecture/11-deployment-topology.html class=md-nav__link> <span class=md-ellipsis> Deployment Topology </span> </a> </li> <li class=md-nav__item> <a href=../architecture/12-scalability.html class=md-nav__link> <span class=md-ellipsis> Scalability </span> </a> </li> <li class=md-nav__item> <a href=../architecture/13-cross-cutting-concerns.html class=md-nav__link> <span class=md-ellipsis> Cross-Cutting Concerns </span> </a> </li> <li class=md-nav__item> <a href=../architecture/14-architectural-decisions.html class=md-nav__link> <span class=md-ellipsis> Architectural Decisions </span> </a> </li> <li class=md-nav__item> <a href=../architecture/15-appendices.html class=md-nav__link> <span class=md-ellipsis> Appendices </span> </a> </li> <li class=md-nav__item> <a href=../architecture/epfl-compliance-mapping.html class=md-nav__link> <span class=md-ellipsis> EPFL Compliance </span> </a> </li> <li class=md-nav__item> <a href=../architecture/code-standards.html class=md-nav__link> <span class=md-ellipsis> Code Standards </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture Decision Records </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture Decision Records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../architecture-decision-records/index.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/001-python-package-manager.html class=md-nav__link> <span class=md-ellipsis> ADR-001 Python Package Manager </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/002-frontend-framework.html class=md-nav__link> <span class=md-ellipsis> ADR-002 Frontend Framework </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/003-backend-framework.html class=md-nav__link> <span class=md-ellipsis> ADR-003 Backend Framework </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/004-database-selection.html class=md-nav__link> <span class=md-ellipsis> ADR-004 Database Selection </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/005-authorization-strategy.html class=md-nav__link> <span class=md-ellipsis> ADR-005 Authorization Strategy </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/010-background-job-processing.html class=md-nav__link> <span class=md-ellipsis> ADR-010 Background Job Processing </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/012-jwt-authentication-strategy.html class=md-nav__link> <span class=md-ellipsis> ADR-012 JWT Authentication </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/013-object-storage-strategy.html class=md-nav__link> <span class=md-ellipsis> ADR-013 Object Storage </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Frontend </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Frontend </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../frontend/01-overview.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Backend </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Backend </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../backend/01-overview.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Database </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Database </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../database/01-overview.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=true> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Overview </span> <span class="md-nav__icon md-icon"></span> </label> <a href=01-overview.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Overview </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#infrastructure-overview_1 class=md-nav__link> <span class=md-ellipsis> Infrastructure Overview </span> </a> <nav class=md-nav aria-label="Infrastructure Overview"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#platform class=md-nav__link> <span class=md-ellipsis> Platform </span> </a> </li> <li class=md-nav__item> <a href=#network-architecture class=md-nav__link> <span class=md-ellipsis> Network Architecture </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deployment class=md-nav__link> <span class=md-ellipsis> Deployment </span> </a> <nav class=md-nav aria-label=Deployment> <ul class=md-nav__list> <li class=md-nav__item> <a href=#helm-chart-structure class=md-nav__link> <span class=md-ellipsis> Helm Chart Structure </span> </a> </li> <li class=md-nav__item> <a href=#deploying-to-environments class=md-nav__link> <span class=md-ellipsis> Deploying to Environments </span> </a> </li> <li class=md-nav__item> <a href=#deployment-checklist class=md-nav__link> <span class=md-ellipsis> Deployment Checklist </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#kubernetes-resources class=md-nav__link> <span class=md-ellipsis> Kubernetes Resources </span> </a> <nav class=md-nav aria-label="Kubernetes Resources"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#namespaces class=md-nav__link> <span class=md-ellipsis> Namespaces </span> </a> </li> <li class=md-nav__item> <a href=#deployments class=md-nav__link> <span class=md-ellipsis> Deployments </span> </a> </li> <li class=md-nav__item> <a href=#statefulset class=md-nav__link> <span class=md-ellipsis> StatefulSet </span> </a> </li> <li class=md-nav__item> <a href=#services class=md-nav__link> <span class=md-ellipsis> Services </span> </a> </li> <li class=md-nav__item> <a href=#ingress class=md-nav__link> <span class=md-ellipsis> Ingress </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-management class=md-nav__link> <span class=md-ellipsis> Configuration Management </span> </a> <nav class=md-nav aria-label="Configuration Management"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configmaps class=md-nav__link> <span class=md-ellipsis> ConfigMaps </span> </a> </li> <li class=md-nav__item> <a href=#secrets-infisical class=md-nav__link> <span class=md-ellipsis> Secrets (Infisical) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#storage class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> <nav class=md-nav aria-label=Storage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#persistent-volumes class=md-nav__link> <span class=md-ellipsis> Persistent Volumes </span> </a> </li> <li class=md-nav__item> <a href=#storage-classes class=md-nav__link> <span class=md-ellipsis> Storage Classes </span> </a> </li> <li class=md-nav__item> <a href=#backup-storage class=md-nav__link> <span class=md-ellipsis> Backup Storage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring-observability class=md-nav__link> <span class=md-ellipsis> Monitoring &amp; Observability </span> </a> <nav class=md-nav aria-label="Monitoring & Observability"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prometheus-metrics class=md-nav__link> <span class=md-ellipsis> Prometheus Metrics </span> </a> </li> <li class=md-nav__item> <a href=#grafana-dashboards class=md-nav__link> <span class=md-ellipsis> Grafana Dashboards </span> </a> </li> <li class=md-nav__item> <a href=#alerting class=md-nav__link> <span class=md-ellipsis> Alerting </span> </a> </li> <li class=md-nav__item> <a href=#logging class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#scaling class=md-nav__link> <span class=md-ellipsis> Scaling </span> </a> <nav class=md-nav aria-label=Scaling> <ul class=md-nav__list> <li class=md-nav__item> <a href=#horizontal-pod-autoscaler-hpa class=md-nav__link> <span class=md-ellipsis> Horizontal Pod Autoscaler (HPA) </span> </a> </li> <li class=md-nav__item> <a href=#manual-scaling class=md-nav__link> <span class=md-ellipsis> Manual Scaling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#operations class=md-nav__link> <span class=md-ellipsis> Operations </span> </a> <nav class=md-nav aria-label=Operations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#common-kubectl-commands class=md-nav__link> <span class=md-ellipsis> Common kubectl Commands </span> </a> </li> <li class=md-nav__item> <a href=#health-checks class=md-nav__link> <span class=md-ellipsis> Health Checks </span> </a> </li> <li class=md-nav__item> <a href=#database-operations class=md-nav__link> <span class=md-ellipsis> Database Operations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pod-not-starting class=md-nav__link> <span class=md-ellipsis> Pod Not Starting </span> </a> </li> <li class=md-nav__item> <a href=#service-not-reachable class=md-nav__link> <span class=md-ellipsis> Service Not Reachable </span> </a> </li> <li class=md-nav__item> <a href=#database-connection-issues class=md-nav__link> <span class=md-ellipsis> Database Connection Issues </span> </a> </li> <li class=md-nav__item> <a href=#high-resource-usage class=md-nav__link> <span class=md-ellipsis> High Resource Usage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> <span class=md-ellipsis> Security </span> </a> <nav class=md-nav aria-label=Security> <ul class=md-nav__list> <li class=md-nav__item> <a href=#network-policies class=md-nav__link> <span class=md-ellipsis> Network Policies </span> </a> </li> <li class=md-nav__item> <a href=#pod-security class=md-nav__link> <span class=md-ellipsis> Pod Security </span> </a> </li> <li class=md-nav__item> <a href=#tlsssl class=md-nav__link> <span class=md-ellipsis> TLS/SSL </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#additional-resources class=md-nav__link> <span class=md-ellipsis> Additional Resources </span> </a> <nav class=md-nav aria-label="Additional Resources"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture-documentation class=md-nav__link> <span class=md-ellipsis> Architecture Documentation </span> </a> </li> <li class=md-nav__item> <a href=#epfl-resources class=md-nav__link> <span class=md-ellipsis> EPFL Resources </span> </a> </li> <li class=md-nav__item> <a href=#external-documentation class=md-nav__link> <span class=md-ellipsis> External Documentation </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=infrastructure-overview>Infrastructure Overview<a class=headerlink href=#infrastructure-overview title="Permanent link">&para;</a></h1> <p>The infrastructure runs on EPFL's Kubernetes platform (ENAC-K8S) with PostgreSQL for persistence and monitoring via Prometheus/Grafana. This overview covers deployment, hosting, and operational procedures.</p> <p>For system architecture and deployment decisions, see:</p> <ul> <li><a href=../architecture/11-deployment-topology.html>Deployment Topology</a> - Infrastructure architecture</li> <li><a href=../architecture/05-environments.html>Environments</a> - Environment configuration</li> <li><a href=../architecture/06-cicd-pipeline.html>CI/CD Pipeline</a> - Automated deployment</li> <li><a href=../architecture/08-tech-stack.html>Tech Stack</a> - Infrastructure technology choices</li> </ul> <hr> <h2 id=infrastructure-overview_1>Infrastructure Overview<a class=headerlink href=#infrastructure-overview_1 title="Permanent link">&para;</a></h2> <h3 id=platform>Platform<a class=headerlink href=#platform title="Permanent link">&para;</a></h3> <ul> <li><strong>Kubernetes</strong>: EPFL internal cluster (ENAC-K8S)</li> <li><strong>Container Runtime</strong>: Docker</li> <li><strong>Orchestration</strong>: Kubernetes with Helm charts</li> <li><strong>Load Balancing</strong>: EPFL load balancer (internal only, not publicly accessible)</li> <li><strong>Storage</strong>: RCP NAS for persistent volumes</li> <li><strong>Monitoring</strong>: Prometheus, Grafana, OpenTelemetry</li> <li><strong>Secrets Management</strong>: Infisical</li> <li><strong>Deployment</strong>: ArgoCD (GitOps) + GitHub Actions</li> </ul> <h3 id=network-architecture>Network Architecture<a class=headerlink href=#network-architecture title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>Internet
  ↓
EPFL VPN (required for external access)
  ↓
EPFL Load Balancer (internal only)
  ↓
Kubernetes Ingress Controller
  ↓
Services (frontend, backend, database)
</code></pre></div> <p><strong>Access</strong>: Application is <strong>NOT publicly accessible</strong> outside EPFL network. Users must connect via EPFL VPN or be on EPFL campus network.</p> <hr> <h2 id=deployment>Deployment<a class=headerlink href=#deployment title="Permanent link">&para;</a></h2> <h3 id=helm-chart-structure>Helm Chart Structure<a class=headerlink href=#helm-chart-structure title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>helm/
├── Chart.yaml              # Chart metadata
├── values.yaml             # Default configuration
├── values-dev.yaml         # Development overrides
├── values-staging.yaml     # Staging overrides
├── values-prod.yaml        # Production overrides
└── templates/
    ├── frontend-deployment.yaml
    ├── backend-deployment.yaml
    ├── postgres-statefulset.yaml
    ├── redis-deployment.yaml
    ├── celery-deployment.yaml
    ├── ingress.yaml
    ├── services.yaml
    ├── configmaps.yaml
    └── secrets.yaml (managed by Infisical)
</code></pre></div> <h3 id=deploying-to-environments>Deploying to Environments<a class=headerlink href=#deploying-to-environments title="Permanent link">&para;</a></h3> <p><strong>Via ArgoCD</strong> (Recommended):</p> <p>ArgoCD automatically syncs from Git repository to Kubernetes cluster.</p> <div class=highlight><pre><span></span><code><span class=c1># View ArgoCD applications</span>
argocd<span class=w> </span>app<span class=w> </span>list

<span class=c1># Sync application manually</span>
argocd<span class=w> </span>app<span class=w> </span>sync<span class=w> </span>co2-calculator-dev

<span class=c1># View deployment status</span>
argocd<span class=w> </span>app<span class=w> </span>get<span class=w> </span>co2-calculator-dev
</code></pre></div> <p><strong>Via Helm</strong> (Manual):</p> <div class=highlight><pre><span></span><code><span class=c1># Deploy to development</span>
helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>co2-calculator<span class=w> </span>./helm<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--namespace<span class=w> </span>co2-calculator-dev<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--values<span class=w> </span>helm/values-dev.yaml

<span class=c1># Deploy to staging</span>
helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>co2-calculator<span class=w> </span>./helm<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--namespace<span class=w> </span>co2-calculator-staging<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--values<span class=w> </span>helm/values-staging.yaml

<span class=c1># Deploy to production</span>
helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>co2-calculator<span class=w> </span>./helm<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--namespace<span class=w> </span>co2-calculator-prod<span class=w> </span><span class=se>\</span>
<span class=w>  </span>--values<span class=w> </span>helm/values-prod.yaml
</code></pre></div> <h3 id=deployment-checklist>Deployment Checklist<a class=headerlink href=#deployment-checklist title="Permanent link">&para;</a></h3> <p>Before deploying to production:</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> All tests pass in CI/CD pipeline</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Staging deployment tested and validated</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Database migrations reviewed and tested</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Environment variables configured correctly</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Secrets rotated if needed</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Monitoring dashboards ready</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Rollback plan documented</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Stakeholders notified of deployment window</li> </ul> <hr> <h2 id=kubernetes-resources>Kubernetes Resources<a class=headerlink href=#kubernetes-resources title="Permanent link">&para;</a></h2> <h3 id=namespaces>Namespaces<a class=headerlink href=#namespaces title="Permanent link">&para;</a></h3> <ul> <li><code>co2-calculator-dev</code>: Development environment</li> <li><code>co2-calculator-staging</code>: Staging environment</li> <li><code>co2-calculator-prod</code>: Production environment</li> </ul> <h3 id=deployments>Deployments<a class=headerlink href=#deployments title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Frontend (Nginx + Vue SPA)</span>
<span class=nt>frontend</span><span class=p>:</span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>100m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>128Mi</span><span class=w> </span><span class="p p-Indicator">}</span>
<span class=w>    </span><span class=nt>limits</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>500m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>256Mi</span><span class=w> </span><span class="p p-Indicator">}</span>

<span class=c1># Backend (FastAPI + Uvicorn)</span>
<span class=nt>backend</span><span class=p>:</span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>200m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>512Mi</span><span class=w> </span><span class="p p-Indicator">}</span>
<span class=w>    </span><span class=nt>limits</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>1000m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>1Gi</span><span class=w> </span><span class="p p-Indicator">}</span>

<span class=c1># Celery Workers</span>
<span class=nt>celery-worker</span><span class=p>:</span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>200m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>512Mi</span><span class=w> </span><span class="p p-Indicator">}</span>
<span class=w>    </span><span class=nt>limits</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>1000m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>2Gi</span><span class=w> </span><span class="p p-Indicator">}</span>

<span class=c1># Redis (task queue)</span>
<span class=nt>redis</span><span class=p>:</span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>100m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>256Mi</span><span class=w> </span><span class="p p-Indicator">}</span>
<span class=w>    </span><span class=nt>limits</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>500m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>512Mi</span><span class=w> </span><span class="p p-Indicator">}</span>
</code></pre></div> <h3 id=statefulset>StatefulSet<a class=headerlink href=#statefulset title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># PostgreSQL</span>
<span class=nt>postgres</span><span class=p>:</span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class=w>  </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">50Gi</span><span class=w> </span><span class=c1># RCP NAS persistent volume</span>
<span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>500m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>1Gi</span><span class=w> </span><span class="p p-Indicator">}</span>
<span class=w>    </span><span class=nt>limits</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> cpu</span><span class=p>:</span><span class=w> </span><span class=nv>2000m</span><span class="p p-Indicator">,</span><span class=nt> memory</span><span class=p>:</span><span class=w> </span><span class=nv>4Gi</span><span class=w> </span><span class="p p-Indicator">}</span>
</code></pre></div> <h3 id=services>Services<a class=headerlink href=#services title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Service definitions</span>
<span class=nt>frontend-service</span><span class=p>:</span>
<span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>

<span class=nt>backend-service</span><span class=p>:</span>
<span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>

<span class=nt>postgres-service</span><span class=p>:</span>
<span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>

<span class=nt>redis-service</span><span class=p>:</span>
<span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">6379</span>
</code></pre></div> <h3 id=ingress>Ingress<a class=headerlink href=#ingress title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">co2-calculator-ingress</span>
<span class=w>  </span><span class=nt>annotations</span><span class=p>:</span>
<span class=w>    </span><span class=nt>kubernetes.io/ingress.class</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class=w>    </span><span class=nt>cert-manager.io/cluster-issuer</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">letsencrypt-prod</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>tls</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>hosts</span><span class=p>:</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">co2calculator.epfl.ch</span>
<span class=w>      </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">co2calculator-tls</span>
<span class=w>  </span><span class=nt>rules</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">co2calculator.epfl.ch</span>
<span class=w>      </span><span class=nt>http</span><span class=p>:</span>
<span class=w>        </span><span class=nt>paths</span><span class=p>:</span>
<span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/api</span>
<span class=w>            </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class=w>            </span><span class=nt>backend</span><span class=p>:</span>
<span class=w>              </span><span class=nt>service</span><span class=p>:</span>
<span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend-service</span>
<span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
<span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class=w>            </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class=w>            </span><span class=nt>backend</span><span class=p>:</span>
<span class=w>              </span><span class=nt>service</span><span class=p>:</span>
<span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">frontend-service</span>
<span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div> <hr> <h2 id=configuration-management>Configuration Management<a class=headerlink href=#configuration-management title="Permanent link">&para;</a></h2> <h3 id=configmaps>ConfigMaps<a class=headerlink href=#configmaps title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Application configuration (non-sensitive)</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend-config</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>DATABASE_HOST</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">postgres-service</span>
<span class=w>  </span><span class=nt>DATABASE_PORT</span><span class=p>:</span><span class=w> </span><span class=s>&quot;5432&quot;</span>
<span class=w>  </span><span class=nt>DATABASE_NAME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">co2calculator</span>
<span class=w>  </span><span class=nt>REDIS_HOST</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">redis-service</span>
<span class=w>  </span><span class=nt>REDIS_PORT</span><span class=p>:</span><span class=w> </span><span class=s>&quot;6379&quot;</span>
<span class=w>  </span><span class=nt>LOG_LEVEL</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span>
<span class=w>  </span><span class=nt>CORS_ORIGINS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://co2calculator.epfl.ch</span>
</code></pre></div> <h3 id=secrets-infisical>Secrets (Infisical)<a class=headerlink href=#secrets-infisical title="Permanent link">&para;</a></h3> <p>Secrets are managed via Infisical and injected into pods:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend-secrets</span>
<span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>DATABASE_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;base64-encoded&gt;</span>
<span class=w>  </span><span class=nt>SECRET_KEY</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;base64-encoded&gt;</span>
<span class=w>  </span><span class=nt>OIDC_CLIENT_SECRET</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;base64-encoded&gt;</span>
</code></pre></div> <p><strong>Management</strong>:</p> <div class=highlight><pre><span></span><code><span class=c1># View secrets (requires cluster admin access)</span>
kubectl<span class=w> </span>get<span class=w> </span>secrets<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Describe secret (no values shown)</span>
kubectl<span class=w> </span>describe<span class=w> </span>secret<span class=w> </span>backend-secrets<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Rotate secret</span>
<span class=c1># Update in Infisical → ArgoCD auto-syncs → Restart deployment</span>
kubectl<span class=w> </span>rollout<span class=w> </span>restart<span class=w> </span>deployment<span class=w> </span>backend<span class=w> </span>-n<span class=w> </span>co2-calculator-prod
</code></pre></div> <hr> <h2 id=storage>Storage<a class=headerlink href=#storage title="Permanent link">&para;</a></h2> <h3 id=persistent-volumes>Persistent Volumes<a class=headerlink href=#persistent-volumes title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># PostgreSQL persistent volume claim</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">postgres-pvc</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>accessModes</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteOnce</span>
<span class=w>  </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rcp-nas</span><span class=w> </span><span class=c1># EPFL RCP NAS storage</span>
<span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
<span class=w>    </span><span class=nt>requests</span><span class=p>:</span>
<span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">50Gi</span>
</code></pre></div> <h3 id=storage-classes>Storage Classes<a class=headerlink href=#storage-classes title="Permanent link">&para;</a></h3> <ul> <li><strong>rcp-nas</strong>: RCP NAS storage (default, for database)</li> <li><strong>local-path</strong>: Local node storage (for temporary files)</li> </ul> <h3 id=backup-storage>Backup Storage<a class=headerlink href=#backup-storage title="Permanent link">&para;</a></h3> <ul> <li><strong>Database backups</strong>: RCP NAS (<code>/backups/postgres/</code>)</li> <li><strong>Application files</strong>: RCP NAS (<code>/data/uploads/</code>)</li> <li><strong>Long-term archives</strong>: EPFL S3-compatible storage (if configured)</li> </ul> <hr> <h2 id=monitoring-observability>Monitoring &amp; Observability<a class=headerlink href=#monitoring-observability title="Permanent link">&para;</a></h2> <h3 id=prometheus-metrics>Prometheus Metrics<a class=headerlink href=#prometheus-metrics title="Permanent link">&para;</a></h3> <p><strong>Backend metrics</strong> (<code>/metrics</code> endpoint):</p> <div class=highlight><pre><span></span><code># Request metrics
http_requests_total{method=&quot;GET&quot;, endpoint=&quot;/api/v1/labs&quot;, status=&quot;200&quot;}
http_request_duration_seconds_bucket{le=&quot;0.1&quot;}

# Application metrics
db_connections_active
db_query_duration_seconds
celery_tasks_running
celery_tasks_failed_total

# Resource metrics
process_cpu_seconds_total
process_resident_memory_bytes
</code></pre></div> <p><strong>Scrape configuration</strong>:</p> <div class=highlight><pre><span></span><code><span class=c1># prometheus-config</span>
<span class=nt>scrape_configs</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;co2-calculator-backend&quot;</span>
<span class=w>    </span><span class=nt>kubernetes_sd_configs</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pod</span>
<span class=w>    </span><span class=nt>relabel_configs</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>__meta_kubernetes_pod_label_app</span><span class="p p-Indicator">]</span>
<span class=w>        </span><span class=nt>regex</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class=w>        </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">keep</span>
</code></pre></div> <h3 id=grafana-dashboards>Grafana Dashboards<a class=headerlink href=#grafana-dashboards title="Permanent link">&para;</a></h3> <p><strong>Main Dashboards</strong>:</p> <ol> <li><strong>Application Overview</strong></li> <li>Request rate, latency, error rate</li> <li>Active users, database connections</li> <li> <p>Celery queue length, task processing time</p> </li> <li> <p><strong>Infrastructure Health</strong></p> </li> <li>CPU, memory, disk usage per pod</li> <li>Network I/O, request throughput</li> <li> <p>Pod restart count, OOMKills</p> </li> <li> <p><strong>Database Performance</strong></p> </li> <li>Query duration, slow queries</li> <li>Connection pool usage</li> <li>Table sizes, index usage</li> </ol> <p><strong>Access</strong>: https://grafana.epfl.ch (requires EPFL credentials)</p> <h3 id=alerting>Alerting<a class=headerlink href=#alerting title="Permanent link">&para;</a></h3> <p><strong>Critical Alerts</strong> (PagerDuty/email):</p> <ul> <li>Service down (all replicas unhealthy)</li> <li>Database connection failure</li> <li>Disk space &gt; 90%</li> <li>Error rate &gt; 5% for 5 minutes</li> </ul> <p><strong>Warning Alerts</strong> (Slack/email):</p> <ul> <li>High memory usage (&gt; 80%)</li> <li>Slow response time (&gt; 1s p95)</li> <li>Celery queue backlog (&gt; 1000 tasks)</li> <li>Certificate expiry (&lt; 7 days)</li> </ul> <p><strong>Configuration</strong>: Alert rules defined in <code>helm/templates/prometheus-rules.yaml</code></p> <h3 id=logging>Logging<a class=headerlink href=#logging title="Permanent link">&para;</a></h3> <p><strong>Log Aggregation</strong>: Logs sent to centralized logging (ELK or similar)</p> <div class=highlight><pre><span></span><code><span class=c1># View pod logs</span>
kubectl<span class=w> </span>logs<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>deployment/backend<span class=w> </span>--tail<span class=o>=</span><span class=m>100</span><span class=w> </span>-f

<span class=c1># View logs from all backend replicas</span>
kubectl<span class=w> </span>logs<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>backend<span class=w> </span>--tail<span class=o>=</span><span class=m>50</span>

<span class=c1># Search logs (if Kibana available)</span>
<span class=c1># Access Kibana UI and filter by namespace: co2-calculator-prod</span>
</code></pre></div> <p><strong>Log Format</strong>: Structured JSON logs</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>  </span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2025-11-11T10:15:30Z&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;level&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;INFO&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;logger&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;app.services.labs&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Laboratory created&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;lab_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;abc123&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user456&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;trace_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;xyz789&quot;</span>
<span class=p>}</span>
</code></pre></div> <hr> <h2 id=scaling>Scaling<a class=headerlink href=#scaling title="Permanent link">&para;</a></h2> <h3 id=horizontal-pod-autoscaler-hpa>Horizontal Pod Autoscaler (HPA)<a class=headerlink href=#horizontal-pod-autoscaler-hpa title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">autoscaling/v2</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">HorizontalPodAutoscaler</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend-hpa</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>scaleTargetRef</span><span class=p>:</span>
<span class=w>    </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class=w>  </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class=w>  </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class=w>  </span><span class=nt>metrics</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Resource</span>
<span class=w>      </span><span class=nt>resource</span><span class=p>:</span>
<span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<span class=w>        </span><span class=nt>target</span><span class=p>:</span>
<span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Utilization</span>
<span class=w>          </span><span class=nt>averageUtilization</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">70</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Resource</span>
<span class=w>      </span><span class=nt>resource</span><span class=p>:</span>
<span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">memory</span>
<span class=w>        </span><span class=nt>target</span><span class=p>:</span>
<span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Utilization</span>
<span class=w>          </span><span class=nt>averageUtilization</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div> <p><strong>Trigger</strong>: Auto-scales when CPU &gt; 70% or memory &gt; 80%</p> <h3 id=manual-scaling>Manual Scaling<a class=headerlink href=#manual-scaling title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Scale backend replicas</span>
kubectl<span class=w> </span>scale<span class=w> </span>deployment<span class=w> </span>backend<span class=w> </span>--replicas<span class=o>=</span><span class=m>5</span><span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Scale Celery workers</span>
kubectl<span class=w> </span>scale<span class=w> </span>deployment<span class=w> </span>celery-worker<span class=w> </span>--replicas<span class=o>=</span><span class=m>4</span><span class=w> </span>-n<span class=w> </span>co2-calculator-prod
</code></pre></div> <hr> <h2 id=operations>Operations<a class=headerlink href=#operations title="Permanent link">&para;</a></h2> <h3 id=common-kubectl-commands>Common kubectl Commands<a class=headerlink href=#common-kubectl-commands title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># View all resources in namespace</span>
kubectl<span class=w> </span>get<span class=w> </span>all<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Check pod status</span>
kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Describe pod (troubleshooting)</span>
kubectl<span class=w> </span>describe<span class=w> </span>pod<span class=w> </span>backend-xxxxx<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># View pod logs</span>
kubectl<span class=w> </span>logs<span class=w> </span>backend-xxxxx<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Execute command in pod</span>
kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>backend-xxxxx<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>--<span class=w> </span>/bin/bash

<span class=c1># Port forward for local access</span>
kubectl<span class=w> </span>port-forward<span class=w> </span>svc/backend-service<span class=w> </span><span class=m>8000</span>:8000<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Restart deployment</span>
kubectl<span class=w> </span>rollout<span class=w> </span>restart<span class=w> </span>deployment<span class=w> </span>backend<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># View rollout status</span>
kubectl<span class=w> </span>rollout<span class=w> </span>status<span class=w> </span>deployment<span class=w> </span>backend<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Rollback deployment</span>
kubectl<span class=w> </span>rollout<span class=w> </span>undo<span class=w> </span>deployment<span class=w> </span>backend<span class=w> </span>-n<span class=w> </span>co2-calculator-prod
</code></pre></div> <h3 id=health-checks>Health Checks<a class=headerlink href=#health-checks title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Check ingress</span>
kubectl<span class=w> </span>get<span class=w> </span>ingress<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Test backend health endpoint</span>
curl<span class=w> </span>https://co2calculator.epfl.ch/api/health

<span class=c1># Test from inside cluster</span>
kubectl<span class=w> </span>run<span class=w> </span>-it<span class=w> </span>--rm<span class=w> </span>debug<span class=w> </span>--image<span class=o>=</span>curlimages/curl<span class=w> </span>--restart<span class=o>=</span>Never<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>--<span class=w> </span><span class=se>\</span>
<span class=w>  </span>curl<span class=w> </span>http://backend-service:8000/health
</code></pre></div> <h3 id=database-operations>Database Operations<a class=headerlink href=#database-operations title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Connect to PostgreSQL</span>
kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>postgres-0<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>--<span class=w> </span>psql<span class=w> </span>-U<span class=w> </span>postgres<span class=w> </span>-d<span class=w> </span>co2calculator

<span class=c1># Backup database</span>
kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>postgres-0<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>--<span class=w> </span><span class=se>\</span>
<span class=w>  </span>pg_dump<span class=w> </span>-U<span class=w> </span>postgres<span class=w> </span>co2calculator<span class=w> </span>&gt;<span class=w> </span>backup_<span class=k>$(</span>date<span class=w> </span>+%Y%m%d<span class=k>)</span>.sql

<span class=c1># Restore database</span>
kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-i<span class=w> </span>postgres-0<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>--<span class=w> </span><span class=se>\</span>
<span class=w>  </span>psql<span class=w> </span>-U<span class=w> </span>postgres<span class=w> </span>co2calculator<span class=w> </span>&lt;<span class=w> </span>backup.sql
</code></pre></div> <hr> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <h3 id=pod-not-starting>Pod Not Starting<a class=headerlink href=#pod-not-starting title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Check pod events</span>
kubectl<span class=w> </span>describe<span class=w> </span>pod<span class=w> </span>backend-xxxxx<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Common issues:</span>
<span class=c1># - ImagePullBackOff: Check image name/tag, registry credentials</span>
<span class=c1># - CrashLoopBackOff: Check logs, environment variables</span>
<span class=c1># - Pending: Check resource requests, node capacity</span>
</code></pre></div> <h3 id=service-not-reachable>Service Not Reachable<a class=headerlink href=#service-not-reachable title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Check service endpoints</span>
kubectl<span class=w> </span>get<span class=w> </span>endpoints<span class=w> </span>backend-service<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Check ingress configuration</span>
kubectl<span class=w> </span>describe<span class=w> </span>ingress<span class=w> </span>co2-calculator-ingress<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Test service from inside cluster</span>
kubectl<span class=w> </span>run<span class=w> </span>-it<span class=w> </span>--rm<span class=w> </span><span class=nb>test</span><span class=w> </span>--image<span class=o>=</span>curlimages/curl<span class=w> </span>--restart<span class=o>=</span>Never<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>--<span class=w> </span><span class=se>\</span>
<span class=w>  </span>curl<span class=w> </span>http://backend-service:8000/health
</code></pre></div> <h3 id=database-connection-issues>Database Connection Issues<a class=headerlink href=#database-connection-issues title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Check PostgreSQL pod status</span>
kubectl<span class=w> </span>get<span class=w> </span>pod<span class=w> </span>postgres-0<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Check PostgreSQL logs</span>
kubectl<span class=w> </span>logs<span class=w> </span>postgres-0<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Test connection from backend pod</span>
kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>backend-xxxxx<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span>--<span class=w> </span><span class=se>\</span>
<span class=w>  </span>psql<span class=w> </span>postgresql://postgres:password@postgres-service:5432/co2calculator<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;SELECT 1;&quot;</span>
</code></pre></div> <h3 id=high-resource-usage>High Resource Usage<a class=headerlink href=#high-resource-usage title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Check resource usage</span>
kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>co2-calculator-prod

<span class=c1># Check resource limits</span>
kubectl<span class=w> </span>describe<span class=w> </span>pod<span class=w> </span>backend-xxxxx<span class=w> </span>-n<span class=w> </span>co2-calculator-prod<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-A<span class=w> </span><span class=m>5</span><span class=w> </span><span class=s2>&quot;Limits&quot;</span>

<span class=c1># View historical metrics in Grafana</span>
<span class=c1># Or use kubectl metrics (if metrics-server installed)</span>
</code></pre></div> <hr> <h2 id=security>Security<a class=headerlink href=#security title="Permanent link">&para;</a></h2> <h3 id=network-policies>Network Policies<a class=headerlink href=#network-policies title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># Restrict backend to only accept traffic from frontend and ingress</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend-network-policy</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>podSelector</span><span class=p>:</span>
<span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span>
<span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class=w>  </span><span class=nt>policyTypes</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<span class=w>  </span><span class=nt>ingress</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>from</span><span class=p>:</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>podSelector</span><span class=p>:</span>
<span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span>
<span class=w>              </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>podSelector</span><span class=p>:</span>
<span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span>
<span class=w>              </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ingress-nginx</span>
<span class=w>      </span><span class=nt>ports</span><span class=p>:</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class=w>          </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
</code></pre></div> <h3 id=pod-security>Pod Security<a class=headerlink href=#pod-security title="Permanent link">&para;</a></h3> <ul> <li><strong>Run as non-root</strong>: All containers run as non-root user</li> <li><strong>Read-only filesystem</strong>: Containers have read-only root filesystem where possible</li> <li><strong>Drop capabilities</strong>: Unnecessary Linux capabilities dropped</li> <li><strong>Resource limits</strong>: CPU and memory limits enforced</li> </ul> <h3 id=tlsssl>TLS/SSL<a class=headerlink href=#tlsssl title="Permanent link">&para;</a></h3> <ul> <li><strong>Certificate management</strong>: cert-manager with Let's Encrypt</li> <li><strong>TLS termination</strong>: At ingress controller</li> <li><strong>Internal communication</strong>: Unencrypted (within cluster network)</li> </ul> <hr> <h2 id=additional-resources>Additional Resources<a class=headerlink href=#additional-resources title="Permanent link">&para;</a></h2> <h3 id=architecture-documentation>Architecture Documentation<a class=headerlink href=#architecture-documentation title="Permanent link">&para;</a></h3> <ul> <li><a href=../architecture/11-deployment-topology.html>Deployment Topology</a> - Full deployment architecture</li> <li><a href=../architecture/12-scalability.html>Scalability Strategy</a> - Scaling patterns</li> <li><a href=../architecture/06-cicd-pipeline.html>CI/CD Pipeline</a> - Deployment automation</li> </ul> <h3 id=epfl-resources>EPFL Resources<a class=headerlink href=#epfl-resources title="Permanent link">&para;</a></h3> <ul> <li>EPFL Kubernetes Documentation (internal)</li> <li>ENAC-IT Support (for infrastructure issues)</li> <li>RCP NAS Documentation (for storage)</li> </ul> <h3 id=external-documentation>External Documentation<a class=headerlink href=#external-documentation title="Permanent link">&para;</a></h3> <ul> <li><a href=https://kubernetes.io/docs/ >Kubernetes Documentation</a></li> <li><a href=https://helm.sh/docs/ >Helm Documentation</a></li> <li><a href=https://argo-cd.readthedocs.io/ >ArgoCD Documentation</a></li> <li><a href=https://prometheus.io/docs/ >Prometheus Documentation</a></li> </ul> <hr> <p><strong>Last Updated</strong>: November 11, 2025<br> <strong>Readable in</strong>: ~10 minutes</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="November 11, 2025 10:45:10 CET">November 11, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg> </span> <nav> <a href=mailto:pierre.guilbert@epfl.ch>Guilbert Pierre</a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> 2025 EPFL — GPL-3.0 License. Built with MkDocs </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "content.code.annotate", "navigation.instant", "navigation.instant.prefetch"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": "1.0.0"}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>