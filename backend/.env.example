# =============================================================================
# CO2 Calculator Backend - Environment Configuration
# =============================================================================
# This file serves as a reference for all available configuration options.
# Copy this file to .env and update with your local/production values.
#
# IMPORTANT: Never commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
APP_NAME=CO2 Calculator API
APP_VERSION=0.1.0
DEBUG=True
# Set to True for local development environment
LOCAL_ENVIRONMENT=True
API_VERSION=/v1
API_DOCS_PREFIX=/api
# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Configure the database connection using DB_URL
#
# If DB_URL is not set, SQLite will be used by default for local development
# Default SQLite database file: ./co2_calculator.db
#
# Examples:
# - SQLite: DB_URL=sqlite+aiosqlite:///./co2_calculator.db
# - PostgreSQL: DB_URL=postgresql://user:pass@host:5432/dbname?sslmode=disable

## CF .database.env.example file for docker-compose setup (same user and password)
## +asyncpg is dynamically added by our core/db module
## when running locally without docker-compose, use localhost as host
# DB_URL=postgresql://co2_user:co2_password@localhost:5432/co2_calculator?sslmode=disable
## When you run with docker-compose, use the service name 'postgres' as host
# DB_URL=postgresql://co2_user:co2_password@postgres:5432/co2_calculator?sslmode=disable

# -----------------------------------------------------------------------------
# File Storage Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# Local file storage path (default if not using S3-compatible storage)
FILES_STORAGE_PATH=./files_storage
# Optional encryption key and salt for file storage (leave empty if not used)
FILES_ENCRYPTION_KEY=
FILES_ENCRYPTION_SALT=
# S3 Configuration (optional, for using S3-compatible storage)
# S3_ENDPOINT_PROTOCOL=https
# S3_ENDPOINT_HOSTNAME=s3.example.com
# S3_ACCESS_KEY_ID=your-access-key-id
# S3_SECRET_ACCESS_KEY=your-secret-access-key
# S3_REGION=your-region
# S3_BUCKET=your-bucket-name
# S3_PATH_PREFIX=optional/path/prefix
# Maximum file size in MB for uploads
# FILES_MAX_SIZE_MB=100

# -----------------------------------------------------------------------------
# Security Settings (REQUIRED)
# -----------------------------------------------------------------------------
# CRITICAL: Generate a secure secret key for production!
# Generate with: openssl rand -hex 32
# Or: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=change-me-in-production-use-openssl-rand-hex-32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_HOURS=12

# -----------------------------------------------------------------------------
# OAuth/OIDC Configuration (optional, for future implementation)
# -----------------------------------------------------------------------------
# OAuth2/OIDC Provider (Keycloak, Entra ID, or other OIDC-compliant provider)
# OAUTH_CLIENT_ID=your-client-id
# OAUTH_CLIENT_SECRET=your-client-secret
# OAUTH_ISSUER_URL examples:
# - Keycloak: https://keycloak.example.com/realms/{your-realm}
# - Entra ID: https://login.microsoftonline.com/{tenant-id}/v2.0
# OAUTH_TENANT_ID=your-tenant-id|your-realm
# OAUTH_SCOPE=openid profile email
# OAUTH_COOKIE_PATH=/

## -------------------------------------------------------------
# TRAVEL DATA API Configuration
## -------------------------------------------------------------
TABLEAU_SERVER_URL="https://tableau-tst.epfl.ch/"
TABLEAU_SITE_CONTENT_URL=calcco2
TABLEAU_DS_FLIGHTS_LUID=xxx
TABLEAU_CONNECTED_APP_CLIENT_ID=xxx
TABLEAU_CONNECTED_APP_SECRET_ID=xxx
TABLEAU_CONNECTED_APP_SECRET_VALUE=xxx
TABLEAU_USERNAME=svc-calcco2-epfl-api
TABLEAU_VERIFY_SSL=true
TABLEAU_REQUEST_TIMEOUT_SECONDS=300
TABLEAU_REST_MIN_API_VERSION=2.4
TABLEAU_MAX_FIELDS=50


## -------------------------------------------------------------
# ROLE PROVIDERS Configuration PLUGIN)
## -------------------------------------------------------------
# Could be 'default' or 'accred' or 'test' (for testing/development)
PROVIDER_PLUGIN=default
## If 'accred' is chosen, additional settings are required:
# ACCRED_API_URL=https://accred.example.com/api
# ACCRED_API_KEY=your-accred-api-key
# ACCRED_API_USERNAME=your-accred-username
## we want to check the health of Accred API, and that it returns one of our expected authorizations
## could be health endpoint or direct authorizations check (it is here to check if we're autenticated and authorized)
# ACCRED_API_HEALTH_URL=https://accred.example.com/api/authorizations?type=right&authid=co2.superadmin

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO


# -----------------------------------------------------------------------------
# Loki Configuration (OPTIONAL)
# -----------------------------------------------------------------------------
# Enable Loki logging integration
# LOKI_ENABLED=false
# LOKI_URL=http://loki:3100
# LOKI_TENANT_ID=your-tenant-id
# LOKI_TIMEOUT=2.0
# LOKI_LABEL_JOB=your-job-label
# LOKI_LABEL_ENV=your-env-label

# Frontend URL for OAuth redirects
FRONTEND_URL=http://localhost:9000

# -----------------------------------------------------------------------------
# OpenTelemetry Configuration
# -----------------------------------------------------------------------------
OTEL_SERVICE_NAME=backend
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp
OTEL_LOG_LEVEL=debug
OTEL_EXPORTER_OTLP_PROTOCOL=grpc
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel:4317
OTEL_PYTHON_LOGGING_AUTO_INSTRUMENTATION_ENABLED=true
