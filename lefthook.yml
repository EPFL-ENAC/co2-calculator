# lefthook.yml
---
commit-msg:
  commands:
    commitlint:
      run: npx --no -- commitlint --edit {1}

# Pre-commit hooks - delegates to Makefiles for single source of truth
pre-commit:
  commands:
    # Format and lint staged files only
    format-lint-staged:
      run: bash scripts/pre-commit-hook.sh
    type-check:
      run: make type-check
# Pre-push hooks - run comprehensive checks on protected branches only
pre-push:
  parallel: false
  commands:
    # Run CI validation only when pushing to protected branches
    ci-validation-protected-branches:
      run: |
        BRANCH=$(git branch --show-current)
        if [[ "$BRANCH" == "dev" || "$BRANCH" == "stage" || "$BRANCH" == "main" ]]; then
          echo "ðŸ”’ Pushing to protected branch '$BRANCH' - running CI validation..."
          make ci
        else
          echo "âœ… Pushing to feature branch '$BRANCH' - skipping CI validation (will run in GitHub Actions)"
        fi

# Colors in output
colors: true