# lefthook.yml
---
commit-msg:
  commands:
    commitlint:
      run: npx --no -- commitlint --edit {1}

# Pre-commit hooks - delegates to Makefiles for single source of truth
pre-commit:
  commands:
    # Format and lint staged files only
    format-lint-staged:
      run: bash scripts/pre-commit-hook.sh
# Pre-push hooks - run comprehensive checks
pre-push:
  parallel: false
  commands:
    # Run full test suite only when pushing to dev branch
    test-suite-dev-only:
      run: |
        if [ "$(git branch --show-current)" = "dev" ]; then
          echo "Running full test suite for dev branch push..."
          make test
        else
          echo "Skipping full test suite for non-dev branch"
        fi
    
    # Run linting on all files
    lint-all:
      run: |
        echo "Running linters on entire codebase..."
        make lint
    
    # Type checking
    type-check:
      run: |
        echo "Running type checking..."
        make type-check

# Colors in output
colors: true