<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=05-environments.html><link rel=next href=07-global-conventions.html><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>CI/CD Pipeline - EPFL Project Technical Docs</title><link rel=stylesheet href=../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#cicd-pipeline-architecture class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../index.html title="EPFL Project Technical Docs" class="md-header__button md-logo" aria-label="EPFL Project Technical Docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EPFL Project Technical Docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> CI/CD Pipeline </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=cyan aria-hidden=true type=radio name=__palette id=__palette_0> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=cyan aria-hidden=true type=radio name=__palette id=__palette_1> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__source> <a href=https://github.com/epfl-enac/co2-calculator title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../index.html class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=index.html class=md-tabs__link> Architecture </a> </li> <li class=md-tabs__item> <a href=../architecture-decision-records/index.html class=md-tabs__link> Architecture Decision Records </a> </li> <li class=md-tabs__item> <a href=../frontend/01-overview.html class=md-tabs__link> Frontend </a> </li> <li class=md-tabs__item> <a href=../backend/01-overview.html class=md-tabs__link> Backend </a> </li> <li class=md-tabs__item> <a href=../database/01-overview.html class=md-tabs__link> Database </a> </li> <li class=md-tabs__item> <a href=../infra/01-overview.html class=md-tabs__link> Infrastructure </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../index.html title="EPFL Project Technical Docs" class="md-nav__button md-logo" aria-label="EPFL Project Technical Docs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> EPFL Project Technical Docs </label> <div class=md-nav__source> <a href=https://github.com/epfl-enac/co2-calculator title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=index.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=01-purpose-scope.html class=md-nav__link> <span class=md-ellipsis> Purpose & Scope </span> </a> </li> <li class=md-nav__item> <a href=02-system-overview.html class=md-nav__link> <span class=md-ellipsis> System Overview </span> </a> </li> <li class=md-nav__item> <a href=03-subsystem-map.html class=md-nav__link> <span class=md-ellipsis> Subsystem Map </span> </a> </li> <li class=md-nav__item> <a href=04-auth-flow.html class=md-nav__link> <span class=md-ellipsis> Auth Flow </span> </a> </li> <li class=md-nav__item> <a href=05-environments.html class=md-nav__link> <span class=md-ellipsis> Environments </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> CI/CD Pipeline </span> <span class="md-nav__icon md-icon"></span> </label> <a href=06-cicd-pipeline.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> CI/CD Pipeline </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#pipeline-overview class=md-nav__link> <span class=md-ellipsis> Pipeline Overview </span> </a> </li> <li class=md-nav__item> <a href=#automated-checks class=md-nav__link> <span class=md-ellipsis> Automated Checks </span> </a> <nav class=md-nav aria-label="Automated Checks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linting-and-formatting class=md-nav__link> <span class=md-ellipsis> Linting and Formatting </span> </a> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=#security-scanning class=md-nav__link> <span class=md-ellipsis> Security Scanning </span> </a> </li> <li class=md-nav__item> <a href=#build-validation class=md-nav__link> <span class=md-ellipsis> Build Validation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#merge-requirements class=md-nav__link> <span class=md-ellipsis> Merge Requirements </span> </a> </li> <li class=md-nav__item> <a href=#deployment-pipeline class=md-nav__link> <span class=md-ellipsis> Deployment Pipeline </span> </a> <nav class=md-nav aria-label="Deployment Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#build-process-per-subsystem class=md-nav__link> <span class=md-ellipsis> Build Process per Subsystem </span> </a> </li> <li class=md-nav__item> <a href=#deployment-flow class=md-nav__link> <span class=md-ellipsis> Deployment Flow </span> </a> </li> <li class=md-nav__item> <a href=#deployment-artifacts class=md-nav__link> <span class=md-ellipsis> Deployment Artifacts </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#performance-monitoring class=md-nav__link> <span class=md-ellipsis> Performance Monitoring </span> </a> <nav class=md-nav aria-label="Performance Monitoring"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lighthouseci class=md-nav__link> <span class=md-ellipsis> LighthouseCI </span> </a> </li> <li class=md-nav__item> <a href=#ecoconception class=md-nav__link> <span class=md-ellipsis> EcoConception </span> </a> </li> <li class=md-nav__item> <a href=#backend-performance class=md-nav__link> <span class=md-ellipsis> Backend Performance </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rollback-mechanisms class=md-nav__link> <span class=md-ellipsis> Rollback Mechanisms </span> </a> </li> <li class=md-nav__item> <a href=#cicd-workflows class=md-nav__link> <span class=md-ellipsis> CI/CD Workflows </span> </a> <nav class=md-nav aria-label="CI/CD Workflows"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#workflow-files class=md-nav__link> <span class=md-ellipsis> Workflow Files </span> </a> </li> <li class=md-nav__item> <a href=#local-ci-validation class=md-nav__link> <span class=md-ellipsis> Local CI Validation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring-and-alerts class=md-nav__link> <span class=md-ellipsis> Monitoring and Alerts </span> </a> </li> <li class=md-nav__item> <a href=#devsecops-integration class=md-nav__link> <span class=md-ellipsis> DevSecOps Integration </span> </a> </li> <li class=md-nav__item> <a href=#continuous-improvement class=md-nav__link> <span class=md-ellipsis> Continuous Improvement </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=07-global-conventions.html class=md-nav__link> <span class=md-ellipsis> Global Conventions </span> </a> </li> <li class=md-nav__item> <a href=08-tech-stack.html class=md-nav__link> <span class=md-ellipsis> Tech Stack </span> </a> </li> <li class=md-nav__item> <a href=09-component-breakdown.html class=md-nav__link> <span class=md-ellipsis> Component Breakdown </span> </a> </li> <li class=md-nav__item> <a href=10-data-flow.html class=md-nav__link> <span class=md-ellipsis> Data Flow </span> </a> </li> <li class=md-nav__item> <a href=11-deployment-topology.html class=md-nav__link> <span class=md-ellipsis> Deployment Topology </span> </a> </li> <li class=md-nav__item> <a href=12-scalability.html class=md-nav__link> <span class=md-ellipsis> Scalability </span> </a> </li> <li class=md-nav__item> <a href=13-cross-cutting-concerns.html class=md-nav__link> <span class=md-ellipsis> Cross-Cutting Concerns </span> </a> </li> <li class=md-nav__item> <a href=14-architectural-decisions.html class=md-nav__link> <span class=md-ellipsis> Architectural Decisions </span> </a> </li> <li class=md-nav__item> <a href=15-appendices.html class=md-nav__link> <span class=md-ellipsis> Appendices </span> </a> </li> <li class=md-nav__item> <a href=epfl-compliance-mapping.html class=md-nav__link> <span class=md-ellipsis> EPFL Compliance </span> </a> </li> <li class=md-nav__item> <a href=code-standards.html class=md-nav__link> <span class=md-ellipsis> Code Standards </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture Decision Records </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture Decision Records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../architecture-decision-records/index.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/001-python-package-manager.html class=md-nav__link> <span class=md-ellipsis> ADR-001 Python Package Manager </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/002-frontend-framework.html class=md-nav__link> <span class=md-ellipsis> ADR-002 Frontend Framework </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/003-backend-framework.html class=md-nav__link> <span class=md-ellipsis> ADR-003 Backend Framework </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/004-database-selection.html class=md-nav__link> <span class=md-ellipsis> ADR-004 Database Selection </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/005-authorization-strategy.html class=md-nav__link> <span class=md-ellipsis> ADR-005 Authorization Strategy </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/010-background-job-processing.html class=md-nav__link> <span class=md-ellipsis> ADR-010 Background Job Processing </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/012-jwt-authentication-strategy.html class=md-nav__link> <span class=md-ellipsis> ADR-012 JWT Authentication </span> </a> </li> <li class=md-nav__item> <a href=../architecture-decision-records/013-object-storage-strategy.html class=md-nav__link> <span class=md-ellipsis> ADR-013 Object Storage </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Frontend </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Frontend </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../frontend/01-overview.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Backend </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Backend </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../backend/01-overview.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Database </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Database </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../database/01-overview.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../infra/01-overview.html class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=cicd-pipeline-architecture>CI/CD Pipeline Architecture<a class=headerlink href=#cicd-pipeline-architecture title="Permanent link">&para;</a></h1> <p>Automated pipeline for build, test, security, and deployment across all environments. This document provides architectural overview and integration patterns.</p> <p><strong>Related documentation:</strong></p> <ul> <li><a href=cicd-workflows.html>CI/CD Workflows</a> - GitHub Actions details</li> <li><a href=workflow-guide.html>Workflow Guide</a> - Developer daily workflow</li> <li><a href=release-management.html>Release Management</a> - Versioning and releases</li> <li><a href=08-tech-stack.html>Tech Stack</a> - Technologies and tools</li> </ul> <h2 id=pipeline-overview>Pipeline Overview<a class=headerlink href=#pipeline-overview title="Permanent link">&para;</a></h2> <p>Pull requests trigger validation workflows. Merges deploy to target environments automatically.</p> <pre class=mermaid><code>graph LR
    PR[PR Created] --&gt; CI[CI Checks]
    CI --&gt; Review[Code Review]
    Review --&gt; Merge[Merge to Branch]
    Merge --&gt; Build[Build Images]
    Build --&gt; Deploy[Deploy to K8s]
    Deploy --&gt; Monitor[Health Checks]

    style PR fill:#e1f5ff
    style CI fill:#fff4e1
    style Review fill:#ffe1f5
    style Merge fill:#e1ffe1
    style Build fill:#f5e1ff
    style Deploy fill:#ffe1e1
    style Monitor fill:#e1fff4</code></pre> <h2 id=automated-checks>Automated Checks<a class=headerlink href=#automated-checks title="Permanent link">&para;</a></h2> <h3 id=linting-and-formatting>Linting and Formatting<a class=headerlink href=#linting-and-formatting title="Permanent link">&para;</a></h3> <p>Code style is enforced automatically:</p> <p><strong>Python:</strong></p> <ul> <li><code>ruff</code> - Fast linting for style violations</li> <li><code>black</code> - Code formatting verification</li> <li><code>mypy</code> - Static type checking</li> </ul> <p><strong>JavaScript/TypeScript:</strong></p> <ul> <li><code>eslint</code> - Linting with project rules</li> <li><code>prettier</code> - Formatting verification</li> <li><code>typescript</code> - Type checking</li> </ul> <p>All checks must pass before merge is allowed.</p> <h3 id=testing>Testing<a class=headerlink href=#testing title="Permanent link">&para;</a></h3> <p>Full test suite runs on every PR:</p> <p><strong>Backend tests:</strong></p> <ul> <li>Unit tests with <code>pytest</code></li> <li>Integration tests for API endpoints</li> <li>Test coverage minimum: 60%</li> </ul> <p><strong>Frontend tests:</strong></p> <ul> <li>Component tests with Vitest</li> <li>E2E tests with Playwright (critical flows)</li> <li>Test coverage minimum: 60%</li> </ul> <p>Run locally before pushing: <code>make test</code></p> <h3 id=security-scanning>Security Scanning<a class=headerlink href=#security-scanning title="Permanent link">&para;</a></h3> <p>Multiple security checks protect the codebase:</p> <p><strong>Dependency scanning:</strong></p> <ul> <li><code>uv pip audit</code> - Python vulnerability scan</li> <li><code>npm audit</code> - Node.js vulnerability scan</li> <li>Dependabot alerts for both ecosystems</li> </ul> <p><strong>Code scanning:</strong></p> <ul> <li>CodeQL analysis for security vulnerabilities</li> <li>Secret scanning to prevent credential leaks</li> <li>SAST (Static Application Security Testing)</li> </ul> <p><strong>Container scanning:</strong></p> <ul> <li>Docker image vulnerability scan</li> <li>Base image updates via Dependabot</li> </ul> <p>Critical vulnerabilities block merge until resolved.</p> <h3 id=build-validation>Build Validation<a class=headerlink href=#build-validation title="Permanent link">&para;</a></h3> <p>Verify builds succeed before deployment:</p> <p><strong>Backend:</strong></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>backend<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>make<span class=w> </span>build
<span class=c1># Creates Docker image</span>
</code></pre></div> <p><strong>Frontend:</strong></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>frontend<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>make<span class=w> </span>build
<span class=c1># Creates production bundle with Vite</span>
</code></pre></div> <p>Build failures prevent deployment to any environment.</p> <h2 id=merge-requirements>Merge Requirements<a class=headerlink href=#merge-requirements title="Permanent link">&para;</a></h2> <p>Pull requests must meet these criteria before merge:</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> All CI checks passing (green status)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Code review approved by team member</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Test coverage at 60% minimum</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> No critical security vulnerabilities</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Dependabot alerts resolved or acknowledged</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Conventional commit messages</li> </ul> <p>Merge is blocked automatically if requirements are not met.</p> <h2 id=deployment-pipeline>Deployment Pipeline<a class=headerlink href=#deployment-pipeline title="Permanent link">&para;</a></h2> <h3 id=build-process-per-subsystem>Build Process per Subsystem<a class=headerlink href=#build-process-per-subsystem title="Permanent link">&para;</a></h3> <p>Each component builds independently:</p> <p><strong>Frontend:</strong></p> <ul> <li>Node.js build with Vite bundler</li> <li>Static assets optimized and compressed</li> <li>Source maps generated for debugging</li> <li>Environment variables injected</li> </ul> <p><strong>Backend:</strong></p> <ul> <li>Python package with uv dependencies</li> <li>Docker image with multi-stage build</li> <li>Health check endpoint verified</li> <li>Database migrations included</li> </ul> <p><strong>Infrastructure:</strong></p> <ul> <li>Kubernetes manifests generated</li> <li>Helm charts validated</li> <li>Config maps and secrets prepared</li> </ul> <h3 id=deployment-flow>Deployment Flow<a class=headerlink href=#deployment-flow title="Permanent link">&para;</a></h3> <p>Automated deployment follows this sequence:</p> <pre class=mermaid><code>sequenceDiagram
    autonumber
    participant Dev as Developer
    participant GH as GitHub
    participant GHA as GitHub Actions
    participant Reg as Container Registry
    participant Infra as Infra Repo
    participant Argo as ArgoCD
    participant K8s as Kubernetes

    Dev-&gt;&gt;GH: Push to dev/stage/main
    GH-&gt;&gt;GHA: Trigger workflow
    GHA-&gt;&gt;GHA: Run tests &amp; build
    GHA-&gt;&gt;Reg: Push Docker images
    GHA-&gt;&gt;Infra: Update image tags
    Infra-&gt;&gt;Argo: Detect changes
    Argo-&gt;&gt;K8s: Deploy resources
    K8s-&gt;&gt;K8s: Run health checks
    K8s--&gt;&gt;Argo: Deployment status
    Argo--&gt;&gt;Dev: Notify completion</code></pre> <p><strong>Deployment steps:</strong></p> <ol> <li><strong>Trigger</strong> - Merge to <code>dev</code>, <code>stage</code>, or <code>main</code> branch</li> <li><strong>Build</strong> - GitHub Actions builds Docker images</li> <li><strong>Push</strong> - Images pushed to ghcr.io registry</li> <li><strong>Update</strong> - Infrastructure repo receives new image tags</li> <li><strong>Sync</strong> - ArgoCD detects changes and deploys to Kubernetes</li> <li><strong>Verify</strong> - Health checks confirm successful deployment</li> </ol> <p><strong>Environment deployment rules:</strong></p> <table> <thead> <tr> <th>Branch</th> <th>Environment</th> <th>Trigger</th> <th>Validation</th> </tr> </thead> <tbody> <tr> <td><code>dev</code></td> <td>Development</td> <td>Automatic on merge</td> <td>Smoke tests</td> </tr> <tr> <td><code>stage</code></td> <td>Staging</td> <td>Manual PR approval</td> <td>Full regression</td> </tr> <tr> <td><code>main</code></td> <td>Pre-prod/Prod</td> <td>Manual with tag</td> <td>Complete validation</td> </tr> </tbody> </table> <p>For detailed environment promotion workflow, see <a href=release-management.html>Release Management</a>.</p> <h3 id=deployment-artifacts>Deployment Artifacts<a class=headerlink href=#deployment-artifacts title="Permanent link">&para;</a></h3> <p>Artifacts are versioned and stored:</p> <ul> <li>Docker images: <code>ghcr.io/epfl-enac/co2-calculator-backend:v0.1.0</code></li> <li>Frontend bundles: <code>ghcr.io/epfl-enac/co2-calculator-frontend:v0.1.0</code></li> <li>Helm charts: Tagged in git with version</li> <li>Database migrations: Included in backend image</li> </ul> <p>Artifacts are immutable and tagged with version. For versioning strategy, see <a href=release-management.html>Release Management</a>.</p> <h2 id=performance-monitoring>Performance Monitoring<a class=headerlink href=#performance-monitoring title="Permanent link">&para;</a></h2> <h3 id=lighthouseci>LighthouseCI<a class=headerlink href=#lighthouseci title="Permanent link">&para;</a></h3> <p>Frontend performance is tracked automatically:</p> <ul> <li>Performance score &gt; 90</li> <li>Accessibility score &gt; 90</li> <li>Best practices score &gt; 90</li> <li>SEO score &gt; 90</li> </ul> <p>Reports generated on each deployment.</p> <h3 id=ecoconception>EcoConception<a class=headerlink href=#ecoconception title="Permanent link">&para;</a></h3> <p>Green IT metrics monitored:</p> <ul> <li>Page weight &lt; 1MB target</li> <li>HTTP requests minimized</li> <li>Energy efficiency tracked</li> <li>Carbon footprint estimated</li> </ul> <h3 id=backend-performance>Backend Performance<a class=headerlink href=#backend-performance title="Permanent link">&para;</a></h3> <p>Optional load testing for backend:</p> <ul> <li>Response time &lt; 500ms (p95)</li> <li>Throughput &gt; 100 req/s</li> <li>Error rate &lt; 0.1%</li> </ul> <p>Run with k6 or locust when needed.</p> <h2 id=rollback-mechanisms>Rollback Mechanisms<a class=headerlink href=#rollback-mechanisms title="Permanent link">&para;</a></h2> <p>If deployment issues occur, rollback is automated:</p> <p><strong>Kubernetes rollback:</strong></p> <div class=highlight><pre><span></span><code>argocd<span class=w> </span>app<span class=w> </span>rollback<span class=w> </span>co2-calculator
</code></pre></div> <p>ArgoCD maintains deployment history using git-ops pattern.</p> <p><strong>Database rollback:</strong></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>backend<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>make<span class=w> </span>migration-down
</code></pre></div> <p>Alembic migrations include downgrade scripts.</p> <p><strong>Manual rollback:</strong></p> <div class=highlight><pre><span></span><code><span class=c1># Revert to previous version tag</span>
git<span class=w> </span>checkout<span class=w> </span>v0.2.0
kubectl<span class=w> </span><span class=nb>set</span><span class=w> </span>image<span class=w> </span>deployment/backend<span class=w> </span><span class=nv>backend</span><span class=o>=</span>ghcr.io/...:v0.2.0
</code></pre></div> <p>Always test rollback procedures in staging first.</p> <h2 id=cicd-workflows>CI/CD Workflows<a class=headerlink href=#cicd-workflows title="Permanent link">&para;</a></h2> <h3 id=workflow-files>Workflow Files<a class=headerlink href=#workflow-files title="Permanent link">&para;</a></h3> <p>GitHub Actions workflows in <code>.github/workflows/</code>:</p> <ul> <li><code>quality-check.yml</code> - Code quality enforcement</li> <li><code>test.yml</code> - Unit and integration testing</li> <li><code>build.yml</code> - Build verification</li> <li><code>security.yml</code> - Security vulnerability scanning</li> <li><code>lighthouse.yml</code> - Performance and accessibility audits</li> <li><code>deploy.yml</code> - Automated deployment</li> <li><code>deploy-mkdocs.yml</code> - Documentation deployment</li> <li><code>release-please.yml</code> - Automated release management</li> </ul> <p>For complete workflow details, triggers, and configuration, see <a href=cicd-workflows.html>CI/CD Workflows</a>.</p> <h3 id=local-ci-validation>Local CI Validation<a class=headerlink href=#local-ci-validation title="Permanent link">&para;</a></h3> <p>Run full CI suite locally before pushing:</p> <div class=highlight><pre><span></span><code>make<span class=w> </span>ci<span class=w>  </span><span class=c1># Runs lint, type-check, test, build</span>
</code></pre></div> <p>This matches GitHub Actions checks exactly. For troubleshooting, see <a href=cicd-workflows.html#troubleshooting>CI/CD Workflows</a>.</p> <h2 id=monitoring-and-alerts>Monitoring and Alerts<a class=headerlink href=#monitoring-and-alerts title="Permanent link">&para;</a></h2> <p>Post-deployment monitoring:</p> <p><strong>Application metrics:</strong></p> <ul> <li>Error rates in logs</li> <li>Response times</li> <li>Request volumes</li> <li>Resource usage</li> </ul> <p><strong>Infrastructure metrics:</strong></p> <ul> <li>Pod health status</li> <li>Container restarts</li> <li>Resource limits</li> <li>Network traffic</li> </ul> <p><strong>Alerting rules:</strong></p> <ul> <li>Error rate &gt; 1%</li> <li>Response time &gt; 2s</li> <li>Pod crashes</li> <li>Failed deployments</li> </ul> <p>Alerts sent to team via configured channels.</p> <h2 id=devsecops-integration>DevSecOps Integration<a class=headerlink href=#devsecops-integration title="Permanent link">&para;</a></h2> <p>Security is integrated throughout the pipeline:</p> <p><strong>Shift-left security:</strong></p> <ul> <li>Pre-commit hooks run basic checks</li> <li>IDE extensions show issues in real-time</li> <li>PR checks catch problems early</li> </ul> <p><strong>Continuous scanning:</strong></p> <ul> <li>Daily dependency scans</li> <li>Weekly container scans</li> <li>Code scanning on every commit</li> </ul> <p><strong>Vulnerability response:</strong></p> <ul> <li>Critical: Fix within 24 hours</li> <li>High: Fix within 7 days</li> <li>Medium: Fix within 30 days</li> <li>Low: Fix at next sprint</li> </ul> <p>See <a href=code-standards.html>Code Standards</a> for security policies.</p> <h2 id=continuous-improvement>Continuous Improvement<a class=headerlink href=#continuous-improvement title="Permanent link">&para;</a></h2> <p>Pipeline metrics tracked:</p> <ul> <li>Build success rate</li> <li>Average build time</li> <li>Deployment frequency</li> <li>Mean time to recovery</li> <li>Change failure rate</li> </ul> <p>Review monthly to optimize processes.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="November 11, 2025 10:45:10 CET">November 11, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg> </span> <nav> <a href=mailto:pierre.guilbert@epfl.ch>Guilbert Pierre</a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> 2025 EPFL â€” GPL-3.0 License. Built with MkDocs </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "content.code.annotate", "navigation.instant", "navigation.instant.prefetch"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": "1.0.0"}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>